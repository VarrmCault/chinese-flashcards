<ng-container *ngIf="currentCard">
  <chf-card>
    <div card-content class="translation centered-card">
      <span [innerHTML]="currentCard.card.meanings | cardMeanings"></span>
      <span class="card-done-text" *ngIf="currentCard.isCompleted">
        Card completed for this session!
      </span>
    </div>
  </chf-card>

  <ng-container *ngIf="cardRevealed; else cardForm">
    <chf-card *ngIf="pinyinInput || characterInput">
      <div card-content class="centered-card chinese">
        <div class="floating-icon">
          <fa-icon
            [icon]="icons.failed"
            size="lg"
            class="failed"
            *ngIf="isMistake; else successIcon"
          />
          <ng-template #successIcon>
            <fa-icon [icon]="icons.success" size="lg" class="passed" />
          </ng-template>
        </div>
        <span>{{ characterInput }}</span>
        <span class="pinyin-font">{{ pinyinInput }}</span>
      </div>
    </chf-card>

    <chf-card *ngIf="isMistake">
      <div card-content class="centered-card chinese">
        <div class="floating-icon">
          <fa-icon [icon]="icons.success" size="lg" class="solution" />
        </div>
        <span>{{ currentCard.card.characters }}</span>
        <span class="pinyin-font">{{ currentCard.card.pinyin }}</span>
      </div>
    </chf-card>

    <div>
      How did you find this card?
      <chf-card-difficulty
        [difficulty]="currentCard.card.difficulty"
        (difficultyChange)="changeDifficulty($event)"
      />
    </div>
  </ng-container>

  <ng-template #cardForm>
    <chf-card reversedCorners>
      <div card-content>
        <mat-form-field subscriptSizing="dynamic" *ngIf="currentCard.card.characters">
          <mat-label>Chinese characters</mat-label>
          <input matInput [(ngModel)]="characterInput" />
        </mat-form-field>

        <ng-container *ngIf="learnPinyin">
          <chf-pinyin-form-field
            [(ngModel)]="pinyinInput"
            *ngIf="currentCard.card.pinyin"
          />
        </ng-container>
      </div>
      <div card-actions>
        <chf-button type="primary" (click)="checkResponse()">
          <fa-icon [icon]="icons.check" />
          Check
        </chf-button>
      </div>
    </chf-card>
  </ng-template>

  <div class="bottom-actions" [ngClass]="{ centered: cardRevealed }">
    <chf-button *ngIf="!cardRevealed" (click)="reveal()">Reveal the card</chf-button>
    <chf-button *ngIf="cardRevealed" type="primary" (click)="nextCard()">
      <fa-icon [icon]="icons.next" />
      Next card
    </chf-button>
  </div>
</ng-container>
